/**
 * @ 省市联动插件 2017-1-12
 *
	<form id="form">
		<select id="province-picker"></select>
		<select id="city-picker"></select>
	</form>
	<script>
		cityPicker.init({
			pId: 'province-picker', //省id              必填
			cId: 'city-picker',     //市id              必填
			defaults: [5, 127],      //默认[省，市]id    非必填
			formId:"form"           //必填，不填写则form 发生reset事件的时候会出问题
		})
	</script>
 */

function CityPicker() {
	this.province = [
		["0", "省份"],
		["1", "北京"],
		["2", "上海"],
		["3", "天津"],
		["4", "重庆"],
		["5", "黑龙江"],
		["6", "吉林"],
		["7", "辽宁"],
		["8", "内蒙古"],
		["9", "宁夏"],
		["10", "新疆"],
		["11", "青海"],
		["12", "甘肃"],
		["13", "陕西"],
		["14", "河北"],
		["15", "河南"],
		["16", "山东"],
		["17", "山西"],
		["18", "湖北"],
		["19", "湖南"],
		["20", "安徽"],
		["21", "江苏"],
		["22", "浙江"],
		["23", "江西"],
		["24", "广东"],
		["25", "广西"],
		["26", "福建"],
		["27", "四川"],
		["28", "云南"],
		["29", "贵州"],
		["30", "西藏"],
		["31", "海南"],
		["32", "香港"],
		["33", "澳门"],
		["34", "台湾"]
	];
	this.city = [
		["0-0","市区"],
		["1-1","北京"],
		["2-18","上海"],
		["3-38","天津"],
		["4-46","重庆"],
		["5-50","哈尔滨"],
		["5-130","大庆"],
		["5-132","佳木斯"],
		["5-135","绥化"],
		["5-129","鸡西"],
		["5-52","牡丹江"],
		["5-134","黑河"],
		["5-51","齐齐哈尔"],
		["5-128","双鸭山"],
		["5-136","大兴安岭地区"],
		["5-131","伊春"],
		["5-127","鹤岗"],
		["5-133","七台河"],
		["6-53","长春"],
		["6-54","吉林"],
		["6-143","延边朝鲜族自治州"],
		["6-142","白城"],
		["6-137","四平"],
		["6-140","白山"],
		["6-139","通化"],
		["6-138","辽源"],
		["6-141","松原"],
		["6-450","延吉"],
		
		["6-451","梅河口"],
		["7-55","沈阳"],
		["7-56","大连"],
		["7-144","鞍山"],
		["7-146","本溪"],
		["7-149","营口"],
		["7-150","盘锦"],
		["7-151","阜新"],
		["7-147","丹东"],
		["7-57","锦州"],
		["7-148","葫芦岛"],
		["7-145","抚顺"],
		["7-153","铁岭"],
		["7-152","辽阳"],
		["7-154","朝阳"],
		["7-467","瓦房店"],
		["8-58","呼和浩特"],
		["8-59","包头"],
		["8-158","鄂尔多斯"],
		["8-156","赤峰"],
		["8-469","呼伦贝尔"],
		["8-157","通辽"],
		["8-161","锡林郭勒盟"],
		["8-160","乌兰察布"],
		["8-155","乌海"],
		["8-164","兴安盟"],
		["8-162","巴彦淖尔盟"],
		["8-163","阿拉善盟"],
		["8-468","巴彦淖尔"],
		["8-471","乌兰浩特"],
		["8-470","集宁"],
		["8-472","锡林浩特"],
		["9-60","银川"],
		["9-166","吴忠"],
		["9-167","固原"],
		["9-165","石嘴山"],
		["10-61","乌鲁木齐"],
		["10-168","克拉玛依"],
		["10-501","昌吉回族自治州"],
		["10-175","巴音郭楞蒙古自治州"],
		["10-507","石河子"],
		["10-177","博尔塔拉蒙古自治州"],
		["10-511","伊犁哈萨克自治州"],
		["10-502","哈密"],
		["10-506","库尔勒"],
		["10-512","伊宁"],
		["10-500","阿克苏地区"],
		["10-503","和田地区"],
		["10-504","喀什地区"],
		["10-174","克孜勒苏柯尔克孜自治州"],
		["10-510","奎屯"],
		["10-508","吐鲁番"],
		["10-509","乌市"],
		["11-62","西宁"],
		["11-473","格尔木"],
		["11-179","海东"],
		["11-181","黄南藏族自治州"],
		["11-183","果洛藏族自治州"],
		["11-180","海北藏族自治州"],
		["11-182","海南藏族自治州"],
		["11-185","海西蒙古族藏族自治州"],
		["11-184","玉树藏族自治州"],
		["12-63","兰州"],
		["12-195","陇南"],
		["12-194","定西"],
		["12-190","张掖"],
		["12-186","金昌"],
		["12-192","酒泉"],
		["12-191","平凉"],
		["12-193","庆阳"],
		["12-64","天水"],
		["12-187","白银"],
		["12-196","甘南藏族自治州"],
		["12-188","嘉峪关"],
		["12-422","嘉峪"],
		["12-197","临夏回族自治州"],
		["12-423","武威"],
		["13-65","西安"],
		["13-202","榆林"],
		["13-201","汉中"],
		["13-200","渭南"],
		["13-199","咸阳"],
		["13-66","宝鸡"],
		["13-67","延安"],
		["13-203","安康"],
		["13-204","商洛"],
		["13-198","铜川"],
		["13-496","韩城"],
		["14-205","唐山"],
		["14-207","邯郸"],
		["14-212","廊坊"],
		["14-68","石家庄"],
		["14-69","保定"],
		["14-208","邢台"],
		["14-209","张家口"],
		["14-206","秦皇岛"],
		["14-211","沧州"],
		["14-213","衡水"],
		["14-210","承德"],
		["14-436","霸州"],
		["14-439","涿州"],
		["14-437","青县"],
		["14-438","任丘"],
		["15-70","郑州"],
		["15-226","信阳"],
		["15-71","洛阳"],
		["15-225","商丘"],
		["15-228","驻马店"],
		["15-220","濮阳"],
		["15-215","平顶山"],
		["15-530","济源"],
		["15-224","南阳"],
		["15-216","焦作"],
		["15-218","新乡"],
		["15-219","安阳"],
		["15-223","三门峡"],
		["15-222","漯河"],
		["15-221","许昌"],
		["15-227","周口"],
		["15-214","开封"],
		["15-217","鹤壁"],
		["16-72","济南"],
		["16-73","青岛"],
		["16-234","济宁"],
		["16-74","烟台"],
		["16-232","潍坊"],
		["16-239","临沂"],
		["16-235","泰安"],
		["16-229","淄博"],
		["16-236","日照"],
		["16-233","威海"],
		["16-231","东营"],
		["16-241","滨州"],
		["16-240","聊城"],
		["16-230","枣庄"],
		["16-238","德州"],
		["16-475","菏泽"],
		["16-237","莱芜"],
		["16-485","乳山"],
		["16-487","滕州"],
		["16-482","龙口"],
		["16-486","寿光"],
		["16-489","招远"],
		["16-474","高密"],
		["16-478","胶南"],
		["16-477","即墨"],
		["16-479","莱州"],
		["16-483","蓬莱"],
		["16-484","青州"],
		["16-488","文登"],
		["17-75","太原"],
		["17-249","临汾"],
		["17-76","大同"],
		["17-245","长治"],
		["17-251","吕梁"],
		["17-250","运城"],
		["17-243","朔州"],
		["17-246","晋城"],
		["17-247","忻州"],
		["17-248","晋中"],
		["17-244","阳泉"],
		["17-494","孝义"],
		["17-491","河津"],
		["17-492","侯马"],
		["17-495","榆次"],
		["18-77","武汉"],
		["18-260","黄冈"],
		["18-256","宜昌"],
		["18-254","十堰"],
		["18-253","襄阳"],
		["18-263","恩施土家族苗族自治州"],
		["18-252","黄石"],
		["18-262","随州"],
		["18-259","孝感"],
		["18-255","荆州"],
		["18-445","仙桃"],
		["18-258","鄂州"],
		["18-444","潜江"],
		["18-257","荆门"],
		["18-261","咸宁"],
		["18-443","汉阳"],
		["18-440","安陆"],
		
		["19-78","长沙"],
		["19-266","衡阳"],
		["19-264","株洲"],
		["19-273","永州"],
		["19-272","郴州"],
		["19-267","邵阳"],
		["19-265","湘潭"],
		["19-268","岳阳"],
		["19-274","怀化"],
		["19-269","常德"],
		["19-271","益阳"],
		["19-276","湘西土家族苗族自治州"],
		["19-275","娄底"],
		["19-270","张家界"],
		["19-448","邵东"],
		["20-79","合肥"],
		["20-278","淮南"],
		["20-80","芜湖"],
		["20-284","滁州"],
		["20-286","宿州"],
		["20-277","蚌埠"],
		["20-285","阜阳"],
		["20-291","宣城"],
		["20-282","安庆"],
		["20-279","马鞍山"],
		["20-280","淮北"],
		["20-288","六安"],
		["20-281","铜陵"],
		["20-283","黄山"],
		["20-289","亳州"],
		["20-287","巢湖"],
		["20-290","池州"],
		["20-413","宁国"],
		["20-412","蒙城"],
		["20-414","桐城"],
		["21-81","南京"],
		["21-303","苏州"],
		["21-301","常州"],
		["21-292","徐州"],
		["21-299","南通"],
		["21-302","无锡"],
		["21-298","泰州"],
		["21-294","淮安"],
		["21-296","盐城"],
		["21-295","宿迁"],
		["21-297","扬州"],
		["21-300","镇江"],
		["21-293","连云港"],
		["21-458","昆山"],
		["21-465","张家港"],
		["21-452","常熟"],
		["21-453","丹阳"],
		["21-460","太仓"],
		["21-464","宜兴"],
		["21-454","海门"],
		["21-459","溧阳"],
		["21-462","吴江"],
		["21-456","江阴"],
		["21-457","靖江"],
		["21-455","江都"],
		
		["22-82","杭州"],
		["22-304","宁波"],
		["22-306","嘉兴"],
		["22-305","温州"],
		["22-308","绍兴"],
		["22-307","湖州"],
		["22-312","台州"],
		["22-309","金华"],
		["22-313","丽水"],
		["22-310","衢州"],
		["22-311","舟山"],
		["22-528","诸暨"],
		["22-520","平湖"],
		["22-523","嵊州"],
		["22-524","温岭"],
		["22-525","义乌"],
		["22-526","永康"],
		["22-514","慈溪"],
		["22-515","东阳"],
		["22-516","奉化"],
		["22-517","乐清"],
		["22-518","临安"],
		["22-519","临海"],
		["22-521","瑞安"],
		["22-522","上虞"],
		["22-529","新昌"],
		["22-527","余姚"],
		["23-83","南昌"],
		["23-319","赣州"],
		["23-323","上饶"],
		["23-317","九江"],
		["23-320","吉安"],
		["23-314","景德镇"],
		["23-321","宜春"],
		["23-322","抚州"],
		["23-315","萍乡"],
		["23-316","新余"],
		["23-318","鹰潭"],
		["23-466","高安"],
		["24-84","广州"],
		["24-85","深圳"],
		["24-329","惠州"],
		["24-334","佛山"],
		["24-331","东莞"],
		["24-332","中山"],
		["24-336","湛江"],
		["24-333","江门"],
		["24-325","汕头"],
		["24-338","肇庆"],
		["24-324","珠海"],
		["24-327","河源"],
		["24-341","揭阳"],
		["24-337","茂名"],
		["24-326","韶关"],
		["24-335","阳江"],
		["24-330","汕尾"],
		["24-342","云浮"],
		["24-328","梅州"],
		["24-339","清远"],
		["24-340","潮州"],
		["24-427","顺德"],
		["24-428","台山"],
		["24-424","花都"],
		["24-425","开平"],
		["24-426","南海"],
		
		["24-429","增城"],
		["25-86","南宁"],
		["25-343","柳州"],
		["25-350","玉林"],
		["25-345","梧州"],
		["25-346","北海"],
		["25-348","钦州"],
		["25-344","桂林"],
		["25-355","崇左"],
		["25-347","防城港"],
		["25-351","百色"],
		["25-349","贵港"],
		["25-353","河池"],
		["25-354","来宾"],
		["25-352","贺州"],
		["26-87","福州"],
		["26-88","厦门"],
		["26-358","泉州"],
		["26-359","漳州"],
		["26-361","龙岩"],
		["26-357","莆田"],
		["26-415","福清"],
		["26-362","宁德"],
		["26-356","三明"],
		["26-360","南平"],
		["26-418","南安"],
		["26-417","晋江"],
		["26-420","石狮"],
		["26-416","建瓯"],
		["26-419","邵武"],
		["26-421","仙游"],
		["27-89","成都"],
		["27-372","南充"],
		["27-375","达州"],
		["27-367","绵阳"],
		["27-366","德阳"],
		["27-373","宜宾"],
		["27-376","巴中"],
		["27-365","泸州"],
		["27-368","广元"],
		["27-370","内江"],
		["27-379","资阳"],
		["27-378","眉山"],
		["27-364","攀枝花"],
		["27-377","雅安"],
		["27-369","遂宁"],
		["27-363","自贡"],
		["27-374","广安"],
		["27-371","乐山"],
		["27-380","阿坝藏族羌族自治州"],
		["27-382","凉山彝族自治州"],
		["27-381","甘孜藏族自治州"],
		["27-497","广汉"],
		
		["27-499","西昌"],
		["28-90","昆明"],
		["28-392","西双版纳傣族自治州"],
		["28-386","昭通"],
		["28-395","德宏傣族景颇族自治州"],
		["28-391","红河哈尼族彝族自治州"],
		["28-390","文山壮族苗族自治州"],
		["28-385","保山"],
		["28-513","大理白族自治州"],
		["28-383","曲靖"],
		["28-393","楚雄"],
		["28-389","丽江"],
		["28-384","玉溪"],
		["28-388","临沧"],
		["28-396","怒江傈僳族自治州"],
		["28-397","迪庆藏族自治州"],
		["28-387","普洱"],
		["29-91","贵阳"],
		["29-399","遵义"],
		["29-400","安顺"],
		["29-402","毕节"],
		["29-398","六盘水"],
		["29-405","黔南布依族苗族自治州"],
		["29-403","黔西南布依族苗族自治州"],
		["29-404","黔东南苗族侗族自治州"],
		["29-434","凯里"],
		["29-432","都匀"],
		
		["29-435","铜仁"],
		["30-92","拉萨"],
		["30-410","阿里地区"],
		["30-407","昌都"],
		["30-411","林芝"],
		["30-406","那曲地区"],
		["30-409","日喀则"],
		["30-408","山南"],
		["31-93","海口"],
		["31-94","三亚"],
		["32-95","香港"],
		["33-96","澳门"],
		["34-98","高雄"],
		["34-101","基隆"],
		["34-97","台北"],
		["34-100","台南"],
		["34-99","台中"],
		["34-102","新竹"]
	];
};

CityPicker.prototype = {
	each: function(data, callback) {
		for (var i in data) {
			callback(i, data[i]);
		}
	},
	init: function(param) {
		param.defaults = param.defaults || [1, 1];
		var self = this,
			fra = document.createDocumentFragment();
		self.obj1 = document.getElementById(param.pId);
		self.obj2 = document.getElementById(param.cId);
		self.each(self.province, function(index, data) {
			var opt = document.createElement('option');
			opt.appendChild(document.createTextNode(data[1]));
			opt.setAttribute('value', data[0]);
			fra.appendChild(opt);
			if (param.defaults[0] == data[0]) {
				opt.selected = true;
			}
		});
		self.obj1.appendChild(fra);
		self.getCity(param.defaults);
		self.obj1.onchange = function() {
			self.getCity([this.value]);
		}
		//处理表单reset
		if(param.formId){
			document.getElementById(param.formId).onreset=function(){
				self.set(1,1);
			}
		}
	},
	getCity: function(param) {
		var self = this,
			fra = document.createDocumentFragment();
		self.each(self.city, function(index, data) {
			var opt = document.createElement('option'),
				ids = data[0].split('-'),
				pid = ids[0],
				id = ids[1];
			if (pid == param[0]) {
				opt.appendChild(document.createTextNode(data[1]));
				opt.setAttribute('value', id);
				fra.appendChild(opt);
				if (id == param[1]) {
					opt.selected = true;
				}
			}
		});
		self.obj2.innerHTML = '';
		self.obj2.appendChild(fra);
	},
	set:function(a,b){
		a=a||0;b=b||0;
		this.obj1.value=a;
		this.getCity([a,b]);
	}
};
var cityPicker = new CityPicker();
